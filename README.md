# Proto_GeoRogue

Unityで開発中のGeoRogueプロトタイププロジェクトです。

## 概要

大量のオブジェクトを効率的に処理するための最適化技術を検証・実装するプロトタイプです。

## 技術スタック

- **Unity**: 2022.3以降
- **URP**: Universal Render Pipeline
- **Jobs System / Burst**: 並列処理・ネイティブコード生成

## 現在の実装

- **敵・ジェム・弾**: `Graphics.DrawMeshInstanced` で一括描画（Instantiate なし、座標・状態は NativeArray/List で管理）
- **衝突判定**: 空間分割（Spatial Partitioning）＋ Job による弾と敵の当たり判定
- **RenderManager**: 敵・ジェム・弾のメッシュ/マテリアルをインスタンス描画
- **InitializeMonobehaviour**: Camera / Bullet / Enemy / Gem の初期化を GameManager から一括実行

## TODO

（優先度の高い順）

### ステージ・アーキテクチャ

- [ ] ステージ構成：ボスは抽象クラスが必要そう
- [ ] 通常敵は複数用意できるようにしたほうがよいかも
- [ ] ステージ２敵
- [ ] ステージ２ボス
- [ ] ステージ３敵
- [ ] ステージ３ボス

### 当たり判定・空間分割

- [ ] 敵の当たり判定は見た目（スケール）通りになっているか
  - vs プレイヤー
  - vs 弾
- [ ] 敵のスケールが大きくなっても空間分割はちゃんと機能するか

### パフォーマンス・リソース

- [ ] リソースチェック、敵マテリアルの GPU Instancing の設定
- [ ] ダメージテキストの描画最適化（保留）  
  - 案: データ駆動＋ワールド空間ビルボード＋数字アトラス＋DrawMeshInstanced
- [ ] LOD（Level of Detail）の検討
- [ ] プロファイリング・ベンチマークの追加

### ゲームプレイ・敵

- [ ] 敵の弾対応、プレイヤーにのみ当たる
- [ ] 敵数が増えた時のカメラ位置と敵スポーン位置の調整
- [ ] 敵・ボス・アップグレードのバリエーション追加
- [ ] 敵の出現・消滅演出
- [ ] ゲームモード：デフェンス
- [ ] プレイヤーHP回復（アイテム or アップグレード）
- [ ] クリティカルヒット処理
- [ ] ジェム全吸引（ボス遷移前など）

### UI・演出

- [ ] ボスにもHPバーがあったほうがよいかも
- [ ] ダメージテキスト表示は範囲内ランダム表示したほうが良いかも
- [ ] ステージ名表示（調整・改善）

### 操作・カメラ

- [ ] カーソルで打つ方向を変えれる方がよいかな（ボスモードだけでもよいかも）
  - カーソルでカメラの方向を決められ、その方向に撃つ感じ
- [ ] シフトで上昇できる
- [ ] 動きに慣性を入れると気持ち良い感じになるかも
- [ ] プレイヤー操作モードをタイトルで選択できるようにしてもいいかも
  - WASD+Shift+Space
  - WASD+マウス
  - マウスのみ

### メタ・進行

- [ ] Upgrade にレアを入れても良さそう
- [ ] 引き継ぎ要素とかほしいなぁ（育成とか繰り返しできる感じ）
- [ ] ステージ途中からのリトライが欲しくなる
- [ ] 途中リタイア欲しいかも？ポーズ

### 開発・ドキュメント

- [ ] Cursor のコード規約を rule で設定する
- [ ] ドキュメントの充実

## セットアップ

1. Unity Hub でプロジェクトを開く
2. 必要なパッケージがインポートされたら、メインシーンを開いて実行

## ライセンス

プロトタイプ段階のため、ライセンスは未定です。
