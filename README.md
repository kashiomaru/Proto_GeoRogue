# Proto_GeoRogue

Unityで開発中のGeoRogueプロトタイププロジェクトです。

## 概要

大量のオブジェクトを効率的に処理するための最適化技術を検証・実装するプロトタイプです。

## 技術スタック

- **Unity**: 2022.3以降
- **URP**: Universal Render Pipeline
- **Jobs System / Burst**: 並列処理・ネイティブコード生成

## 現在の実装

- **敵・ジェム・弾**: `Graphics.DrawMeshInstanced` で一括描画（Instantiate なし、座標・状態は NativeArray/List で管理）
- **衝突判定**: 空間分割（Spatial Partitioning）＋ Job による弾と敵の当たり判定
- **RenderManager**: 敵・ジェム・弾のメッシュ/マテリアルをインスタンス描画
- **InitializeMonobehaviour**: Camera / Bullet / Enemy / Gem の初期化を GameManager から一括実行

## TODO

（優先度の高い順）

### ステージ・アーキテクチャ

- [ ] ステージ２ボス
- [ ] ステージ３ボス
- [ ] 分裂するボス実装
- [ ] 消えるボス実装

### 不具合

- [ ] タイトルに戻った時にカメラ移動が起こっている（不具合）

### パフォーマンス・リソース

- [ ] 毎フレーム new がないかチェック
- [ ] 最適化できそうなところがないか
- [ ] リソースチェック、敵マテリアルの GPU Instancing の設定
- [ ] ダメージテキストの描画最適化（保留）  
  - 案: データ駆動＋ワールド空間ビルボード＋数字アトラス＋DrawMeshInstanced
- [ ] プロファイリング・ベンチマークの追加

### ゲームプレイ・敵

- [ ] 敵の弾対応、プレイヤーにのみ当たる
- [ ] 敵数が増えた時のカメラ位置と敵スポーン位置の調整
- [ ] 敵・ボス・アップグレードのバリエーション追加
- [ ] 敵の出現・消滅演出
- [ ] ゲームモード：デフェンス
- [ ] ランダムステージ、スコアアタックモード
- [ ] プレイヤーHP回復（アイテム or アップグレード）
- [ ] クリティカルヒット処理
- [ ] ダメージにブレがっても良さそう
- [ ] ジェム全吸引（ボス遷移前など）

### 操作・カメラ

- [ ] カーソルで打つ方向を変えれる方がよいかな（ボスモードだけでもよいかも）
  - カーソルでカメラの方向を決められ、その方向に撃つ感じ
- [ ] ターゲットカーソルを出してもいいかも
- [ ] シフトで上昇できる
- [ ] 動きに慣性を入れると気持ち良い感じになるかも
- [ ] プレイヤー操作モードをタイトルで選択できるようにしてもいいかも
  - WASD+Shift+Space
  - WASD+マウス
  - マウスのみ

### メタ・進行

- [ ] スコア対応、ランキング
- [ ] Upgrade にレアを入れても良さそう（10レベル単位でレアを入れるか）
- [ ] レベルアップ選択UI、プレイヤーか弾かカテゴリを表記すると良さそう
- [ ] 攻撃力アップが欲しい。レアアップグレード時に含めるか
- [ ] 引き継ぎ要素とかほしいなぁ（育成とか繰り返しできる感じ）
- [ ] ステージ途中からのリトライが欲しくなる
- [ ] リトライ処理。ゲームオーバーしたステージからリトライ or タイトルに戻る Exit
- [ ] 途中リタイア欲しいかも？ポーズ
- [ ] ESC でポーズ。Continue と Exit ボタン。
- [ ] 強くてニューゲーム
- [ ] サウンド対応。通常戦闘BGM、ボスBGM、各SE

## セットアップ

1. Unity Hub でプロジェクトを開く
2. 必要なパッケージがインポートされたら、メインシーンを開いて実行

## ライセンス

プロトタイプ段階のため、ライセンスは未定です。
